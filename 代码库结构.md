china-budyko-mega-analysis/
├── README.md
├── requirements.txt
├── environment.yml
├── setup.py
│
├── data/
│   ├── china_catchments/
│   │   ├── boundaries/           # 流域边界 (10000+ catchments)
│   │   ├── meteorology/          # 气象数据 (CMFD, ERA5, etc.)
│   │   ├── streamflow/           # 径流数据 (国家站网)
│   │   ├── attributes/           # 流域属性
│   │   └── cmip6/               # CMIP6未来情景数据
│   ├── processed/
│   └── results/
│
├── src/
│   ├── __init__.py
│   │
│   ├── data_processing/
│   │   ├── __init__.py
│   │   ├── china_hydro_downloader.py    # 中国水文数据下载
│   │   ├── cmip6_processor.py           # CMIP6数据处理
│   │   ├── spatial_aggregation.py       # 空间聚合到流域
│   │   └── bias_correction.py           # 偏差校正
│   │
│   ├── budyko/
│   │   ├── __init__.py
│   │   ├── curves.py                    # Budyko曲线（已有）
│   │   ├── deviation_ibrahim.py         # Ibrahim方法
│   │   ├── trajectory_jaramillo.py      # ⭐ Jaramillo轨迹分析
│   │   ├── movement_metrics.py          # ⭐ 运动指标计算
│   │   └── future_projection.py         # ⭐ 未来情景分析
│   │
│   ├── analysis/
│   │   ├── __init__.py
│   │   ├── historical_analysis.py       # 历史期分析
│   │   ├── future_scenarios.py          # ⭐ 未来情景比较
│   │   ├── regional_clustering.py       # 区域聚类
│   │   ├── driver_attribution.py        # ⭐ 驱动因子归因
│   │   └── sensitivity_pet.py           # ⭐ PET方法敏感性
│   │
│   ├── visualization/
│   │   ├── __init__.py
│   │   ├── budyko_trajectory_plot.py    # ⭐ 轨迹图
│   │   ├── direction_rose.py            # ⭐ 方向玫瑰图
│   │   ├── china_maps.py                # 中国地图定制
│   │   └── scenario_comparison.py       # 情景对比图
│   │
│   ├── utils/
│   │   ├── __init__.py
│   │   ├── parallel_processing.py       # ⭐ 并行计算（万级流域）
│   │   ├── database.py                  # ⭐ 数据库管理
│   │   └── geo_utils.py                 # 地理空间工具
│   │
│   └── models/
│       ├── __init__.py
│       ├── pet_models.py                # ⭐ 多种PET模型
│       └── budyko_regression.py         # ω参数预测模型
│
├── notebooks/
│   ├── 01_china_data_preparation.ipynb
│   ├── 02_historical_deviation_analysis.ipynb
│   ├── 03_trajectory_direction_analysis.ipynb  # ⭐ 新增
│   ├── 04_future_scenario_projections.ipynb    # ⭐ 新增
│   ├── 05_regional_patterns_china.ipynb
│   └── 06_integrated_results.ipynb
│
├── scripts/
│   ├── batch_processing/
│   │   ├── run_parallel_10k.py          # ⭐ 万级流域并行
│   │   ├── submit_slurm_jobs.sh         # HPC作业提交
│   │   └── merge_results.py
│   ├── historical/
│   │   ├── step1_historical_omega.py
│   │   ├── step2_deviation_dists.py
│   │   └── step3_temporal_stability.py
│   ├── future/                           # ⭐ 新增
│   │   ├── step1_cmip6_trajectories.py
│   │   ├── step2_direction_analysis.py
│   │   └── step3_scenario_comparison.py
│   └── integrated_pipeline.py
│
├── configs/
│   ├── china_regions.yaml               # 中国分区配置
│   ├── pet_methods.yaml                 # PET方法配置
│   └── cmip6_scenarios.yaml             # CMIP6情景配置
│
├── tests/
│   ├── test_trajectory.py               # ⭐ 轨迹计算测试
│   ├── test_parallel.py
│   └── test_pet_models.py
│
├── docs/
│   ├── methodology_integrated.md        # 整合方法论
│   ├── china_data_sources.md
│   └── examples_10k_basins.md
│
└── results/
    ├── historical/
    ├── future/
    └── figures/